INSERT INTO respostas (
  id_resposta,
  id_pergunta,
  id_utilizador,
  resposta,
  data_hora_submissao,
  ano,
  dominio,
  validacao
)
VALUES 
{{ JS_regrasSocial.buildValues() }}
ON CONFLICT (id_resposta)
DO UPDATE
SET
  resposta = EXCLUDED.resposta,
  data_hora_submissao = NOW(),
  dominio = EXCLUDED.dominio,
  validacao = 'N'
-- ✅ Só atualiza quando a resposta efectivamente mudou (NULL-safe)
WHERE respostas.resposta IS DISTINCT FROM EXCLUDED.resposta;